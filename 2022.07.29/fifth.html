<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // typedArray 有类型的数组
        // 8,16,32, 几位二进制补码
        // 例如：Int16Array ，16位二进制补码

        /*
        补码：正数的补码等于它的原码；负数的补码等于反码+1（这只是一种算补码的方式，多数书对于补码就是这句话）。
        其实负数的补码等于反码+1只是补码的求法，而不是补码的定义，很多人以为求补码就要先求反码，其实并不是，那些计算机学家并不会心血来潮的把反码+1就定义为补码，只不过补码正好就等于反码+1而已。
        如果有兴趣了解补码的严格说法，建议可以看一下《计算机组成原理》，它会用“模”和“同余”的概念，严谨地解释补码。*/ 
        var arr1 = new Int16Array(5);
        console.log(arr1);
        arr1[0] = 100;
        arr1[1] = 1000000; //16960
        arr1[0] = {'hiahis':23};
        arr1[2] = 4.9; 
        console.log(arr1); 

        
        // generator 生成器 ： 用于创建一个懒迭代器。
        // function* 是创建一个generator函数的语法，使用generator函数时会返回一个generator对象。
        // generator对象遵循迭代器接口，常用的next，return 和 throw函数。
        // next:generator对象只有在调用next时开始执行。
        // yield ：函数在执行到yield语句会暂停并返回yield的值
        function* foo(x){
            console.log(x); //1
            yield x + 1; // 2
            yield x + 2; 
            return x + 3;
        }

        var f = foo(1);
        console.log(f);

        var res = f.next();
        console.log(res);
        // 再次启动函数
        res = f.next();
        console.log(res);

        res = f.next();
        console.log(res);
        res = f.next();
        console.log(res);

        // 斐波：0,1,1,2,3,5,8……
        // max : 执行的次数
        function* fibo(max){
            let a = 0;
            let b = 1;
            for(let i = 0; i < max; i++){
                yield a;
                [a,b] = [b, a+b];
            }
        }
        // 创建一个generator对象，但是尚未执行“尚未开始”
        var fiboObj = fibo(5);
        console.log(fiboObj);
        // 执行时，调用next方法，返回一个对象{value，done}，value是yield的返回值，done取值是true/false，true说明生成器执行结束。
        var res = fiboObj.next();
        console.log(res);
        res = fiboObj.next();
        console.log(res);
        res = fiboObj.next();
        console.log(res);
        res = fiboObj.next();
        console.log(res);
        res = fiboObj.next();
        console.log(res);
        res = fiboObj.next();
        console.log(res);


        var fibo2 = fibo(10);
        for(let value of fibo2){
            console.log(value);
        }

    </script>
</body>
</html>